# Phase 2 Detailed Planning Conversation

**Date:** 2026-02-08
**Goal:** Break Phase 2 into detailed subphases for parallel work

## Context

User requested breaking Phase 2 into detailed subphases similar to Phase 1, to enable multiple workers to work on tasks in parallel.

## Key Decisions

### 1. Phase 2 Workstream Structure

Created 4 workstream plans in `plans/phase-2/`:

| Workstream | Tasks | Focus |
|------------|-------|-------|
| P2-A | 5 | Wire onboarding screens to Supabase |
| P2-B | 4 | Wire profile management CRUD |
| P2-C | 5 | Real Claude integration + conversation storage |
| P2-D | 3 | Real data for dashboard |

### 2. Architecture Decision: Edge Functions for AI

For Claude integration (P2-C), decided to use **Supabase Edge Functions** rather than direct API calls from mobile:
- Keeps API keys secure (not in mobile bundle)
- Enables rate limiting and usage tracking
- Prepares for Phase 4's AI orchestration layer

### 3. Parallelization Strategy

Identified tasks that can run in parallel:
- P2-A-01 + P2-A-02 (onboarding inputs + context)
- P2-C-01 + P2-C-03 (conversations schema + Edge Function)
- P2-B-03 + P2-B-04 (goals + constraints management)
- P2-D-02 + P2-D-03 (workout card + events/metrics)

### 4. Phase 2 Scope Clarification

- Dashboard will show manual fitness metrics for now
- CTL/ATL/TSB remain "--" until Phase 3 (Intervals.icu integration)
- Intervals.icu credentials stored but not used until Phase 3

## Files Changed

- `plans/phase-2/p2-a-onboarding-flow.md` - Created
- `plans/phase-2/p2-b-profile-management.md` - Created
- `plans/phase-2/p2-c-claude-integration.md` - Created
- `plans/phase-2/p2-d-dashboard-data.md` - Created
- `plans/claude-plan-detailed.md` - Updated Phase 1 to complete, added references

## PR Created

PR #32: docs: add Phase 2 detailed planning with workstream breakdowns

## Learnings

1. UI screens already exist from earlier work - Phase 2 is about wiring to real data
2. The check-in flow uses mock `generateMockRecommendation()` - needs real AI
3. Chat uses `PLACEHOLDER_MESSAGES` - needs conversation storage + real AI
4. Following Phase 1 plan structure (goal, current state, tasks, dependencies, verification) works well

## Next Steps

After PR merges, developers can pick up independent workstreams:
- Start with P2-A-02 (onboarding context) - no dependencies
- Start with P2-C-01 (conversations schema) - no dependencies
- Start with P2-C-03 (Edge Function) - no dependencies
